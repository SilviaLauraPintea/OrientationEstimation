\hypertarget{classAnnotatePos}{
\section{AnnotatePos Class Reference}
\label{classAnnotatePos}\index{AnnotatePos@{AnnotatePos}}
}


Class used for annotating human positions (coordinates) in the image.  


\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classAnnotatePos_a920ff95a3e61f6da24786947b1dfe940}{
static int \hyperlink{classAnnotatePos_a920ff95a3e61f6da24786947b1dfe940}{runHullsCreation} (int argc, char $\ast$$\ast$argv)}
\label{classAnnotatePos_a920ff95a3e61f6da24786947b1dfe940}

\begin{DoxyCompactList}\small\item\em Creates priors for the hulls. \item\end{DoxyCompactList}\item 
\hypertarget{classAnnotatePos_ae0c30994de789ec4612f2df20308f486}{
static void \hyperlink{classAnnotatePos_ae0c30994de789ec4612f2df20308f486}{mouseHandlerHull} (int event, int x, int y, int flags, void $\ast$param)}
\label{classAnnotatePos_ae0c30994de789ec4612f2df20308f486}

\begin{DoxyCompactList}\small\item\em Defines a mouse handler for defining the hull for each image. \item\end{DoxyCompactList}\item 
\hypertarget{classAnnotatePos_a9aa31e7455b07c89dd19ac11cbe8e7f4}{
static int \hyperlink{classAnnotatePos_a9aa31e7455b07c89dd19ac11cbe8e7f4}{plotHull} (IplImage $\ast$img, vector$<$ CvPoint $>$ \&hull)}
\label{classAnnotatePos_a9aa31e7455b07c89dd19ac11cbe8e7f4}

\begin{DoxyCompactList}\small\item\em Plots the hull corresponding to the coordinates stored in {\ttfamily $<$} $<$hull$>$$>$. \item\end{DoxyCompactList}\item 
\hypertarget{classAnnotatePos_a386d9bc106b4b13a5c15007689702cd2}{
static int \hyperlink{classAnnotatePos_a386d9bc106b4b13a5c15007689702cd2}{plotAreaTmp} (IplImage $\ast$src, float x, float y)}
\label{classAnnotatePos_a386d9bc106b4b13a5c15007689702cd2}

\begin{DoxyCompactList}\small\item\em Creates a copy of the image and displays the template corresponding to the position centered in {\ttfamily $<$$<$x},y$>$$>$. \item\end{DoxyCompactList}\item 
\hypertarget{classAnnotatePos_afb5ac7651711a63356372656baa086ec}{
static int \hyperlink{classAnnotatePos_afb5ac7651711a63356372656baa086ec}{plotArea} (IplImage $\ast$img, float x, float y)}
\label{classAnnotatePos_afb5ac7651711a63356372656baa086ec}

\begin{DoxyCompactList}\small\item\em Displays the template corresponding to the position centered in {\ttfamily $<$$<$x},y$>$$>$ on the original image. \item\end{DoxyCompactList}\item 
static void \hyperlink{classAnnotatePos_a48dfa23a8cbe0c60c7908c63311808f4}{mouseHandlerAnn} (int event, int x, int y, int flags, void $\ast$param=NULL)
\begin{DoxyCompactList}\small\item\em Depending on the mouse events i draws the templates. \item\end{DoxyCompactList}\item 
static int \hyperlink{classAnnotatePos_a40309eea3a0545ec834f38240bd632c7}{runAnn} (int margc, char $\ast$$\ast$margv)
\begin{DoxyCompactList}\small\item\em Starts the annotation process for the given parameters. \item\end{DoxyCompactList}\item 
\hypertarget{classAnnotatePos_aecfc6c0c7763c3d98b4f0396e4bbdd9b}{
static void \hyperlink{classAnnotatePos_aecfc6c0c7763c3d98b4f0396e4bbdd9b}{loadAnnotations} (const char $\ast$file, vector$<$ \hyperlink{structpositions__t}{positions\_\-t} $>$ \&\hyperlink{classAnnotatePos_a9d4937e46b9fac69334d5fc7ea3f37a6}{locations})}
\label{classAnnotatePos_aecfc6c0c7763c3d98b4f0396e4bbdd9b}

\begin{DoxyCompactList}\small\item\em Reads locations from the given file and stores them in the variable {\ttfamily posT}. \item\end{DoxyCompactList}\item 
\hypertarget{classAnnotatePos_a540e14324f81d045bb76a1e82a592261}{
static float \hyperlink{classAnnotatePos_a540e14324f81d045bb76a1e82a592261}{dist} (const CvPoint \&p1, const CvPoint \&p2)}
\label{classAnnotatePos_a540e14324f81d045bb76a1e82a592261}

\begin{DoxyCompactList}\small\item\em Computes the Euclidian distance between two points. \item\end{DoxyCompactList}\item 
\hypertarget{classAnnotatePos_a819badd48db3d4beb29c28def36a3da5}{
static void \hyperlink{classAnnotatePos_a819badd48db3d4beb29c28def36a3da5}{mergeAnnotations} (const vector$<$ vector$<$ \hyperlink{structpositions__t}{positions\_\-t} $>$ $>$ \&loc, vector$<$ \hyperlink{structpositions__t}{positions\_\-t} $>$ \&res)}
\label{classAnnotatePos_a819badd48db3d4beb29c28def36a3da5}

\begin{DoxyCompactList}\small\item\em Merges the locations of different people to a single position per each image. \item\end{DoxyCompactList}\item 
static int \hyperlink{classAnnotatePos_af4efeb69b6e9fb644e1d1ed50f102187}{runAnnMerging} (int argc, char $\ast$$\ast$argv)
\begin{DoxyCompactList}\small\item\em Runs the annotation merging process. \item\end{DoxyCompactList}\item 
\hypertarget{classAnnotatePos_ab1010c3159c1f5e9def374e4343fdf39}{
static void \hyperlink{classAnnotatePos_ab1010c3159c1f5e9def374e4343fdf39}{averageDist} (const vector$<$ \hyperlink{structpositions__t}{positions\_\-t} $>$ \&annotation, const vector$<$ \hyperlink{structpositions__t}{positions\_\-t} $>$ \&test, double \&avgDist, double \&Ndiff)}
\label{classAnnotatePos_ab1010c3159c1f5e9def374e4343fdf39}

\begin{DoxyCompactList}\small\item\em Computes the average distance from the predicted location and the annotated one and the number of unpredicted people in each image. \item\end{DoxyCompactList}\item 
static int \hyperlink{classAnnotatePos_abd906281e0124c66c0a1119ffa54944e}{runAnnEvaluation} (int argc, char $\ast$$\ast$argv)
\begin{DoxyCompactList}\small\item\em Evaluates the annotations the and compare them by computing the average difference and the number of missed annotations. \item\end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classAnnotatePos_a337c4cd7f149bc0c775c244d75ed9293}{
static vnl\_\-vector$<$ FLOAT $>$ \hyperlink{classAnnotatePos_a337c4cd7f149bc0c775c244d75ed9293}{logLocPrior}}
\label{classAnnotatePos_a337c4cd7f149bc0c775c244d75ed9293}

\begin{DoxyCompactList}\small\item\em Stores a location prior for the people's positions. \item\end{DoxyCompactList}\item 
\hypertarget{classAnnotatePos_a899d3aff6fc24618b39966171b723bcd}{
static vector$<$ CvPoint $>$ \hyperlink{classAnnotatePos_a899d3aff6fc24618b39966171b723bcd}{prior}}
\label{classAnnotatePos_a899d3aff6fc24618b39966171b723bcd}

\begin{DoxyCompactList}\small\item\em Stores the \char`\"{}prior\char`\"{} points for the hull on the current image. \item\end{DoxyCompactList}\item 
\hypertarget{classAnnotatePos_a9d4937e46b9fac69334d5fc7ea3f37a6}{
static vector$<$ CvPoint $>$ \hyperlink{classAnnotatePos_a9d4937e46b9fac69334d5fc7ea3f37a6}{locations}}
\label{classAnnotatePos_a9d4937e46b9fac69334d5fc7ea3f37a6}

\begin{DoxyCompactList}\small\item\em Stores the coordinates of the center of the template for all annotations for each image. \item\end{DoxyCompactList}\item 
\hypertarget{classAnnotatePos_af4f2a0cd670f95418534a9678456c2e3}{
static \hyperlink{structparameter__t}{parameter\_\-t} \hyperlink{classAnnotatePos_af4f2a0cd670f95418534a9678456c2e3}{paramT}}
\label{classAnnotatePos_af4f2a0cd670f95418534a9678456c2e3}

\begin{DoxyCompactList}\small\item\em Stores the image that is currently processed. \item\end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Member Function Documentation}
\hypertarget{classAnnotatePos_a48dfa23a8cbe0c60c7908c63311808f4}{
\index{AnnotatePos@{AnnotatePos}!mouseHandlerAnn@{mouseHandlerAnn}}
\index{mouseHandlerAnn@{mouseHandlerAnn}!AnnotatePos@{AnnotatePos}}
\subsubsection[{mouseHandlerAnn}]{\setlength{\rightskip}{0pt plus 5cm}void mouseHandlerAnn (
\begin{DoxyParamCaption}
\item[{int}]{ event, }
\item[{int}]{ x, }
\item[{int}]{ y, }
\item[{int}]{ flags, }
\item[{void $\ast$}]{ param = {\ttfamily NULL}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}static\mbox{]}}}}
\label{classAnnotatePos_a48dfa23a8cbe0c60c7908c63311808f4}
The mouse events can be:

\begin{DoxyItemize}
\item if the left button is pushed -\/-\/ it draws a temporary template centered on the current pixel; \item if the mouse is moved and left button is down -\/-\/ it plots and moves a temporary template; \item it the left button is up -\/-\/ it stores the current location and it plots the final template. \end{DoxyItemize}
\hypertarget{classAnnotatePos_a40309eea3a0545ec834f38240bd632c7}{
\index{AnnotatePos@{AnnotatePos}!runAnn@{runAnn}}
\index{runAnn@{runAnn}!AnnotatePos@{AnnotatePos}}
\subsubsection[{runAnn}]{\setlength{\rightskip}{0pt plus 5cm}int runAnn (
\begin{DoxyParamCaption}
\item[{int}]{ argc, }
\item[{char $\ast$$\ast$}]{ argv}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}static\mbox{]}}}}
\label{classAnnotatePos_a40309eea3a0545ec834f38240bd632c7}
The parameters have the following meanings:

\begin{DoxyItemize}
\item argv\mbox{[}1\mbox{]} -\/-\/ the file containing the names of the images (relative paths); \item argv\mbox{[}2\mbox{]} -\/-\/ the file containing the calibration data of the camera; \item argv\mbox{[}3\mbox{]} -\/-\/ the file where the annotations need to be stored. \end{DoxyItemize}
\hypertarget{classAnnotatePos_af4efeb69b6e9fb644e1d1ed50f102187}{
\index{AnnotatePos@{AnnotatePos}!runAnnMerging@{runAnnMerging}}
\index{runAnnMerging@{runAnnMerging}!AnnotatePos@{AnnotatePos}}
\subsubsection[{runAnnMerging}]{\setlength{\rightskip}{0pt plus 5cm}int runAnnMerging (
\begin{DoxyParamCaption}
\item[{int}]{ argc, }
\item[{char $\ast$$\ast$}]{ argv}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}static\mbox{]}}}}
\label{classAnnotatePos_af4efeb69b6e9fb644e1d1ed50f102187}
The parameters that need to be given are:

\begin{DoxyItemize}
\item argv\mbox{[}1\mbox{]} -\/-\/ camera height \item argv\mbox{[}2\mbox{]} -\/-\/ person height \item argv\mbox{[}3\mbox{]} -\/-\/ annotations directory \item argv\mbox{[}4\mbox{]} -\/-\/ locations prior \item argv\mbox{[}5\mbox{]} -\/-\/ merged annotations output \item argv\mbox{[}6+\mbox{]} -\/-\/ annotations' files \end{DoxyItemize}
\hypertarget{classAnnotatePos_abd906281e0124c66c0a1119ffa54944e}{
\index{AnnotatePos@{AnnotatePos}!runAnnEvaluation@{runAnnEvaluation}}
\index{runAnnEvaluation@{runAnnEvaluation}!AnnotatePos@{AnnotatePos}}
\subsubsection[{runAnnEvaluation}]{\setlength{\rightskip}{0pt plus 5cm}int runAnnEvaluation (
\begin{DoxyParamCaption}
\item[{int}]{ argc, }
\item[{char $\ast$$\ast$}]{ argv}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}static\mbox{]}}}}
\label{classAnnotatePos_abd906281e0124c66c0a1119ffa54944e}
The input parameters are:

\begin{DoxyItemize}
\item argv\mbox{[}1\mbox{]} -\/-\/ directory of annotations \item argv\mbox{[}2\mbox{]} -\/-\/ calibration data \item argv\mbox{[}3\mbox{]} -\/-\/ prior over locations \item argv\mbox{[}4\mbox{]} -\/-\/ train annotations \item argv\mbox{[}5\mbox{]} -\/-\/ test annotations \end{DoxyItemize}
