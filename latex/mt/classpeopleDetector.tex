\hypertarget{classpeopleDetector}{
\section{peopleDetector Class Reference}
\label{classpeopleDetector}\index{peopleDetector@{peopleDetector}}
}


Class used for detecting useful features in the images that can be later used for training and classifying.  


\subsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{classpeopleDetector_a6ac98abe8ed7600f0db3fb04d718c27c}{FEATUREPART} \{ {\bfseries TOP}, 
{\bfseries BOTTOM}, 
{\bfseries WHOLE}
 \}
\begin{DoxyCompactList}\small\item\em What values can be used for the feature part to be extracted. \item\end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classpeopleDetector_ab324175e53f9d1b43e383f6116a0360e}{
{\bfseries peopleDetector} (int argc, char $\ast$$\ast$argv, bool extract=false, bool buildBg=false)}
\label{classpeopleDetector_ab324175e53f9d1b43e383f6116a0360e}

\item 
\hypertarget{classpeopleDetector_aff38a72b47c051775f82b1567f2388af}{
bool \hyperlink{classpeopleDetector_aff38a72b47c051775f82b1567f2388af}{doFindPerson} (unsigned imgNum, IplImage $\ast$src, const vnl\_\-vector$<$ FLOAT $>$ \&imgVec, vnl\_\-vector$<$ FLOAT $>$ \&bgVec, const FLOAT logBGProb, const vnl\_\-vector$<$ FLOAT $>$ \&logSumPixelBGProb)}
\label{classpeopleDetector_aff38a72b47c051775f82b1567f2388af}

\begin{DoxyCompactList}\small\item\em Overwrites the {\ttfamily doFindPeople} function from the {\ttfamily Tracker} class to make it work with the feature extraction. \item\end{DoxyCompactList}\item 
\hypertarget{classpeopleDetector_a6f2d6a5438138b4a55e49f593bdad57c}{
bool \hyperlink{classpeopleDetector_a6f2d6a5438138b4a55e49f593bdad57c}{imageProcessingMenu} ()}
\label{classpeopleDetector_a6f2d6a5438138b4a55e49f593bdad57c}

\begin{DoxyCompactList}\small\item\em Simple \char`\"{}menu\char`\"{} for skipping to the next image or quitting the processing. \item\end{DoxyCompactList}\item 
\hypertarget{classpeopleDetector_a252be597382b70075093ad12362fe55e}{
void \hyperlink{classpeopleDetector_a252be597382b70075093ad12362fe55e}{allForegroundPixels} (std::deque$<$ \hyperlink{structfeatureExtractor_1_1people}{featureExtractor::people} $>$ \&allPeople, std::deque$<$ unsigned $>$ existing, IplImage $\ast$bg, float threshold)}
\label{classpeopleDetector_a252be597382b70075093ad12362fe55e}

\begin{DoxyCompactList}\small\item\em Get the foreground pixels corresponding to each person. \item\end{DoxyCompactList}\item 
\hypertarget{classpeopleDetector_a8fd96590d66992bac2ba74793b7d6aea}{
float \hyperlink{classpeopleDetector_a8fd96590d66992bac2ba74793b7d6aea}{getDistToTemplate} (int pixelX, int pixelY, std::vector$<$ cv::Point2f $>$ templ)}
\label{classpeopleDetector_a8fd96590d66992bac2ba74793b7d6aea}

\begin{DoxyCompactList}\small\item\em Gets the distance to the given template from a given pixel location. \item\end{DoxyCompactList}\item 
\hypertarget{classpeopleDetector_a5ea8d8459fd4f5197ca3d64fe210e532}{
void \hyperlink{classpeopleDetector_a5ea8d8459fd4f5197ca3d64fe210e532}{extractDataRow} (std::deque$<$ unsigned $>$ \&existing, IplImage $\ast$bg)}
\label{classpeopleDetector_a5ea8d8459fd4f5197ca3d64fe210e532}

\begin{DoxyCompactList}\small\item\em Creates on data row in the final data matrix by getting the feature descriptors. \item\end{DoxyCompactList}\item 
\hypertarget{classpeopleDetector_ab2ab40efaa0b85c48fd9cba0538d8ed8}{
std::deque$<$ unsigned $>$ \hyperlink{classpeopleDetector_ab2ab40efaa0b85c48fd9cba0538d8ed8}{fixLabels} (std::deque$<$ unsigned $>$ existing)}
\label{classpeopleDetector_ab2ab40efaa0b85c48fd9cba0538d8ed8}

\begin{DoxyCompactList}\small\item\em For each row added in the data matrix (each person detected for which we have extracted some features) find the corresponding label. \item\end{DoxyCompactList}\item 
\hypertarget{classpeopleDetector_a20af398a23594735d7d8263f48235c2d}{
void \hyperlink{classpeopleDetector_a20af398a23594735d7d8263f48235c2d}{templateWindow} (cv::Size imgSize, int \&minX, int \&maxX, int \&minY, int \&maxY, \hyperlink{structfeatureExtractor_1_1templ}{featureExtractor::templ} aTempl, int tplBorder=100)}
\label{classpeopleDetector_a20af398a23594735d7d8263f48235c2d}

\begin{DoxyCompactList}\small\item\em Returns the size of a window around a template centered in a given point. \item\end{DoxyCompactList}\item 
\hypertarget{classpeopleDetector_ac4d3919aca10802b6964dac668fcc6ed}{
void \hyperlink{classpeopleDetector_ac4d3919aca10802b6964dac668fcc6ed}{init} (std::string dataFolder, std::string theAnnotationsFile, \hyperlink{classfeatureExtractor_a84a8847c4124b284d1d5ae20bc9be583}{featureExtractor::FEATURE} feat, bool readFromFolder=true)}
\label{classpeopleDetector_ac4d3919aca10802b6964dac668fcc6ed}

\begin{DoxyCompactList}\small\item\em Initializes the parameters of the tracker. \item\end{DoxyCompactList}\item 
\hypertarget{classpeopleDetector_a5126d87e4a0ccf28bc412627c520a557}{
bool \hyperlink{classpeopleDetector_a5126d87e4a0ccf28bc412627c520a557}{canBeAssigned} (unsigned l, std::deque$<$ float $>$ \&minDistances, unsigned k, float distance, std::deque$<$ int $>$ \&assignment)}
\label{classpeopleDetector_a5126d87e4a0ccf28bc412627c520a557}

\begin{DoxyCompactList}\small\item\em Checks to see if an annotation can be assigned to a detection. \item\end{DoxyCompactList}\item 
\hypertarget{classpeopleDetector_a94dcba9ceca4b6551ad63d23e92ea14e}{
float \hyperlink{classpeopleDetector_a94dcba9ceca4b6551ad63d23e92ea14e}{fixAngle} (cv::Point2f feetLocation, cv::Point2f cameraLocation, float angle)}
\label{classpeopleDetector_a94dcba9ceca4b6551ad63d23e92ea14e}

\begin{DoxyCompactList}\small\item\em Fixes the angle to be relative to the camera position with respect to the detected position. \item\end{DoxyCompactList}\item 
\hypertarget{classpeopleDetector_a91339affba5c3baf4fc0c20c9aba583c}{
std::deque$<$ float $>$ \hyperlink{classpeopleDetector_a91339affba5c3baf4fc0c20c9aba583c}{templateExtremes} (std::vector$<$ cv::Point2f $>$ templ, int minX=0, int minY=0)}
\label{classpeopleDetector_a91339affba5c3baf4fc0c20c9aba583c}

\begin{DoxyCompactList}\small\item\em Get template extremities (if needed, considering some borders -\/-\/ relative to the ROI). \item\end{DoxyCompactList}\item 
\hypertarget{classpeopleDetector_afdb309d2ba61756111bc655efc6a58e7}{
void \hyperlink{classpeopleDetector_afdb309d2ba61756111bc655efc6a58e7}{templatePart} (cv::Mat \&thresholded, int k, float offsetX, float offsetY)}
\label{classpeopleDetector_afdb309d2ba61756111bc655efc6a58e7}

\begin{DoxyCompactList}\small\item\em If only a part needs to be used to extract the features then the threshold and the template need to be changed. \item\end{DoxyCompactList}\item 
\hypertarget{classpeopleDetector_a737c4d4b80c656742d10e5d4f8ee54c0}{
float \hyperlink{classpeopleDetector_a737c4d4b80c656742d10e5d4f8ee54c0}{motionVector} (cv::Point2f head, cv::Point2f center)}
\label{classpeopleDetector_a737c4d4b80c656742d10e5d4f8ee54c0}

\begin{DoxyCompactList}\small\item\em Computes the motion vector for the current image given the tracks so far. \item\end{DoxyCompactList}\item 
\hypertarget{classpeopleDetector_ab6aecdfb5e067be5d756628cde087ac4}{
float \hyperlink{classpeopleDetector_ab6aecdfb5e067be5d756628cde087ac4}{opticalFlow} (cv::Mat currentImg, cv::Mat nextImg, std::vector$<$ cv::Point2f $>$ keyPts, cv::Point2f head, cv::Point2f center, bool maxOrAvg)}
\label{classpeopleDetector_ab6aecdfb5e067be5d756628cde087ac4}

\begin{DoxyCompactList}\small\item\em Compute the dominant direction of the SIFT or SURF features. \item\end{DoxyCompactList}\item 
\hypertarget{classpeopleDetector_adb7eb17dacd00e645a29cee8e06191af}{
void \hyperlink{classpeopleDetector_adb7eb17dacd00e645a29cee8e06191af}{keepLargestBlob} (cv::Mat \&thresh, cv::Point2f center, float tmplArea)}
\label{classpeopleDetector_adb7eb17dacd00e645a29cee8e06191af}

\begin{DoxyCompactList}\small\item\em Keeps only the largest blob from the thresholded image. \item\end{DoxyCompactList}\item 
\hypertarget{classpeopleDetector_af5fae407020a2e7bb2d7a39dd0f4fd94}{
std::deque$<$ unsigned $>$ \hyperlink{classpeopleDetector_af5fae407020a2e7bb2d7a39dd0f4fd94}{readLocations} ()}
\label{classpeopleDetector_af5fae407020a2e7bb2d7a39dd0f4fd94}

\begin{DoxyCompactList}\small\item\em Reads the locations at which there are people in the current frame (for the case in which we do not want to use the tracker or build a bgModel). \item\end{DoxyCompactList}\item 
\hypertarget{classpeopleDetector_abd0d4dd5fbb252d876a682ef48e33392}{
void \hyperlink{classpeopleDetector_abd0d4dd5fbb252d876a682ef48e33392}{start} (bool readFromFolder, bool useGT)}
\label{classpeopleDetector_abd0d4dd5fbb252d876a682ef48e33392}

\begin{DoxyCompactList}\small\item\em Starts running something (either the tracker or just mimics it). \item\end{DoxyCompactList}\item 
\hypertarget{classpeopleDetector_acde70edbe5bb04eba4f9cdcb64b2e6f1}{
void \hyperlink{classpeopleDetector_acde70edbe5bb04eba4f9cdcb64b2e6f1}{add2Templates} (std::deque$<$ unsigned $>$ existing)}
\label{classpeopleDetector_acde70edbe5bb04eba4f9cdcb64b2e6f1}

\begin{DoxyCompactList}\small\item\em Adds a templates to the vector of templates at detected positions. \item\end{DoxyCompactList}\item 
\hypertarget{classpeopleDetector_aa9fbbe633f04c17f6b590c931649aa9d}{
void \hyperlink{classpeopleDetector_aa9fbbe633f04c17f6b590c931649aa9d}{pixels2Templates} (int maxX, int minX, int maxY, int minY, int k, cv::Mat thresh, cv::Mat \&colorRoi, float tmplHeight)}
\label{classpeopleDetector_aa9fbbe633f04c17f6b590c931649aa9d}

\begin{DoxyCompactList}\small\item\em Assigns pixels to templates based on proximity. \item\end{DoxyCompactList}\item 
\hypertarget{classpeopleDetector_a68f0da56d1137c3651d3cf7979325b6e}{
cv::Point2f \hyperlink{classpeopleDetector_a68f0da56d1137c3651d3cf7979325b6e}{headLocation} (cv::Point2f center)}
\label{classpeopleDetector_a68f0da56d1137c3651d3cf7979325b6e}

\begin{DoxyCompactList}\small\item\em Gets the location of the head given the feet location. \item\end{DoxyCompactList}\item 
\hypertarget{classpeopleDetector_a3eef27a7fee787afb145d9ce497d4015}{
float \hyperlink{classpeopleDetector_a3eef27a7fee787afb145d9ce497d4015}{rotationAngle} (cv::Point2f headLocation, cv::Point2f feetLocation)}
\label{classpeopleDetector_a3eef27a7fee787afb145d9ce497d4015}

\begin{DoxyCompactList}\small\item\em Return rotation angle given the head and feet position. \item\end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Data Fields}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classpeopleDetector_a3ad3a4240c0f97c7e85aff5c52a454d4}{
bool \hyperlink{classpeopleDetector_a3ad3a4240c0f97c7e85aff5c52a454d4}{print}}
\label{classpeopleDetector_a3ad3a4240c0f97c7e85aff5c52a454d4}

\begin{DoxyCompactList}\small\item\em To print some feature values or not. \item\end{DoxyCompactList}\item 
\hypertarget{classpeopleDetector_ac7c64a841942f6721d4a3694dd4ef18c}{
bool \hyperlink{classpeopleDetector_ac7c64a841942f6721d4a3694dd4ef18c}{plot}}
\label{classpeopleDetector_ac7c64a841942f6721d4a3694dd4ef18c}

\begin{DoxyCompactList}\small\item\em If it is true it displays the tracks of the people in the images. \item\end{DoxyCompactList}\item 
cv::Mat \hyperlink{classpeopleDetector_a511ae0b1c13f95e5f08f1a0dd3da3d93}{data}
\begin{DoxyCompactList}\small\item\em The training data obtained from the feature descriptors. \item\end{DoxyCompactList}\item 
\hypertarget{classpeopleDetector_a66b39000d7ffa25b3eb9a21e28faf658}{
cv::Mat {\bfseries targets}}
\label{classpeopleDetector_a66b39000d7ffa25b3eb9a21e28faf658}

\item 
\hypertarget{classpeopleDetector_a6306f78f8ec781a814a99ab3a4c1b902}{
std::deque$<$ \hyperlink{structannotationsHandle_1_1FULL__ANNOTATIONS}{annotationsHandle::FULL\_\-ANNOTATIONS} $>$ {\bfseries targetAnno}}
\label{classpeopleDetector_a6306f78f8ec781a814a99ab3a4c1b902}

\item 
\hypertarget{classpeopleDetector_a104c590b4dd4ecb421cedcc0324b5579}{
unsigned \hyperlink{classpeopleDetector_a104c590b4dd4ecb421cedcc0324b5579}{lastIndex}}
\label{classpeopleDetector_a104c590b4dd4ecb421cedcc0324b5579}

\begin{DoxyCompactList}\small\item\em The previous size of the data matrix before adding new detections. \item\end{DoxyCompactList}\item 
\hypertarget{classpeopleDetector_a7c276994d9dba181d334351f418631a7}{
int \hyperlink{classpeopleDetector_a7c276994d9dba181d334351f418631a7}{colorspaceCode}}
\label{classpeopleDetector_a7c276994d9dba181d334351f418631a7}

\begin{DoxyCompactList}\small\item\em The colorspace code to be used before extracting the features. \item\end{DoxyCompactList}\item 
\hypertarget{classpeopleDetector_a4c2250cf8f4852e5e763ea7519db0e86}{
\hyperlink{classpeopleDetector_a6ac98abe8ed7600f0db3fb04d718c27c}{peopleDetector::FEATUREPART} \hyperlink{classpeopleDetector_a4c2250cf8f4852e5e763ea7519db0e86}{featurePart}}
\label{classpeopleDetector_a4c2250cf8f4852e5e763ea7519db0e86}

\begin{DoxyCompactList}\small\item\em Indicates if the part from the image to be used (feet, head, or both). \item\end{DoxyCompactList}\item 
\hypertarget{classpeopleDetector_ab69e69fa9a572b68323c36423e885025}{
unsigned \hyperlink{classpeopleDetector_ab69e69fa9a572b68323c36423e885025}{tracking}}
\label{classpeopleDetector_ab69e69fa9a572b68323c36423e885025}

\begin{DoxyCompactList}\small\item\em If the data is sequential motion information can be used. \item\end{DoxyCompactList}\item 
\hypertarget{classpeopleDetector_ab01b95252b8490c09222b0f11baffbb7}{
cv::Mat \hyperlink{classpeopleDetector_ab01b95252b8490c09222b0f11baffbb7}{entireNext}}
\label{classpeopleDetector_ab01b95252b8490c09222b0f11baffbb7}

\begin{DoxyCompactList}\small\item\em The the previous image. \item\end{DoxyCompactList}\item 
\hypertarget{classpeopleDetector_aa21340a84bcfe8b3f13304d2eac7a5c5}{
bool \hyperlink{classpeopleDetector_aa21340a84bcfe8b3f13304d2eac7a5c5}{onlyExtract}}
\label{classpeopleDetector_aa21340a84bcfe8b3f13304d2eac7a5c5}

\begin{DoxyCompactList}\small\item\em If only the features need to be extracted or the data. \item\end{DoxyCompactList}\item 
\hypertarget{classpeopleDetector_a22a0fec885724c49f9a0ed4f2c46d818}{
bool \hyperlink{classpeopleDetector_a22a0fec885724c49f9a0ed4f2c46d818}{useGroundTruth}}
\label{classpeopleDetector_a22a0fec885724c49f9a0ed4f2c46d818}

\begin{DoxyCompactList}\small\item\em Use ground truth to detect the people instead. \item\end{DoxyCompactList}\item 
\hypertarget{classpeopleDetector_a4a1fe12e7562945fdead71b260fbd60e}{
\hyperlink{classfeatureExtractor}{featureExtractor} $\ast$ \hyperlink{classpeopleDetector_a4a1fe12e7562945fdead71b260fbd60e}{extractor}}
\label{classpeopleDetector_a4a1fe12e7562945fdead71b260fbd60e}

\begin{DoxyCompactList}\small\item\em An instance of the class \hyperlink{classfeatureExtractor}{featureExtractor}. \item\end{DoxyCompactList}\item 
\hypertarget{classpeopleDetector_afcb4ef445c08db0a18c8f3e8f223af71}{
std::string \hyperlink{classpeopleDetector_afcb4ef445c08db0a18c8f3e8f223af71}{datasetPath}}
\label{classpeopleDetector_afcb4ef445c08db0a18c8f3e8f223af71}

\begin{DoxyCompactList}\small\item\em The path to the dataset to be used. \item\end{DoxyCompactList}\item 
\hypertarget{classpeopleDetector_a4bb1b20a12c370c54f8fc546aeb67b97}{
std::string \hyperlink{classpeopleDetector_a4bb1b20a12c370c54f8fc546aeb67b97}{imageString}}
\label{classpeopleDetector_a4bb1b20a12c370c54f8fc546aeb67b97}

\begin{DoxyCompactList}\small\item\em The string that appears in the name of the images. \item\end{DoxyCompactList}\item 
\hypertarget{classpeopleDetector_a596731aabeb220301dce4cadb4f2f5c4}{
std::vector$<$ \hyperlink{structfeatureExtractor_1_1templ}{featureExtractor::templ} $>$ {\bfseries templates}}
\label{classpeopleDetector_a596731aabeb220301dce4cadb4f2f5c4}

\end{DoxyCompactItemize}


\subsection{Field Documentation}
\hypertarget{classpeopleDetector_a511ae0b1c13f95e5f08f1a0dd3da3d93}{
\index{peopleDetector@{peopleDetector}!data@{data}}
\index{data@{data}!peopleDetector@{peopleDetector}}
\subsubsection[{data}]{\setlength{\rightskip}{0pt plus 5cm}{\bf data}}}
\label{classpeopleDetector_a511ae0b1c13f95e5f08f1a0dd3da3d93}
The targets/labels of the data. 